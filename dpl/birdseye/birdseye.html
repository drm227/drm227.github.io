<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Image Map Experiment</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.js"></script>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-12">
                <img src="1874 Glover.jpeg" alt="1874 Glover Bird's Eye View of Denver" width="100%" onClick="onClick(event)">
            </div>
        </div>
        <div class="row pt-2">
            <div class="col-6">
                <h3 id="name">Click on Feature</h3>
                <p id="description"></p>
                <img id="image" src=""/>
            </div>
            <div class="col-6">
                <div id="map" style="width:100%;height: 90vh;"></div>
            </div>
        </div>
    </div>
</body>

<script>
    const features = [
        {name:'F Street Bridge',                latitude:39.755297,longitude:-105.007776,pctX:0.346262,pctY:0.679878, description:'The F (now 15th) Street bridge shown here was built in 1864, replacing the original bridge that was destroyed by the Great Flood of 1864.  It crossed the South Platte River, connecting the East Denver and Highland sections of the city.',image:''},
        {name:'Denver Pacific Railroad Depot', latitude:39.756100,longitude:-104.993191, pctX:0.297872,pctY:0.440695, description:'The Denver Pacific Railway and Telegraph Company was incorporated in Colorado on November 19, 1867. The first train from Cheyenne arrived in Denver June 24, 1870.', image:'https://digital.denverlibrary.org/digital/api/singleitem/image/p15330coll22/10815/default.jpg'},
        {name:'Holly Water Works (25 on map)',              latitude:39.754409,longitude:-105.006419, pctX:0.374468,pctY:0.641104, description:'The first waterworks were built by the Denver City Water Company in 1872. The facility was equipped with steam powered "gang pumps" from the Holly Manufacturing Company of Lockport, New York.',image:'https://5008.sydneyplus.com/HistoryColorado_ArgusNet_Final/ViewImage.aspx?template=Image&field=DerivedIm2&hash=d1586f3af048581f06f7abfb7e87971f&width=max&height=max&r=1973317836&lang=en-US'},
        {name:'Lawrence St Methodist Church (18 on map)',   latitude:39.746677,longitude:-104.998602,pctX:0.631840,pctY:0.467741, description:'Denver First Methodist, colloquially known as “Lawrence Street Church,” was completed and first services were held on February 12, 1865.',source:'https://www.trinityumc.org/im-new/our-story/',image:'https://digital.denverlibrary.org/digital/api/singleitem/image/p15330coll22/39286/default.jpg'},
            // https://www.trinityumc.org/im-new/our-story/
        {name:"St. Mary's Cathedral (16 on map)", latitude:39.745029,longitude:-104.993750, pctX:0.673758, pctY:0.372188, description:'St. Mary’s Cathedral located at what is now the corner of 15th and Stout streets was the first Catholic Church in Denver. Father Joseph P. Machebeuf celebrated the first Mass on Christmas eve of 1860. In 1868, Father Machebeuf was appointed as bishop of Colorado and St. Mary’s became the Cathedral.', image:'https://digital.denverlibrary.org/digital/api/singleitem/image/p15330coll22/37835/default.jpg?highlightTerms=denver%20(colo.)%20AND%20st%20mary%20catholic%20church'},
            // https://www.denvercathedral.org/our-history/
            // https://digital.denverlibrary.org/digital/collection/p15330coll22/id/37835/rec/4
        {name:'U.S. Mint (3 on map)', latitude:39.749916,longitude:-104.998582, pctX:0.501418,pctY:0.484662, description:'The mint in Denver was established by an act of Congress approved April 21, 1862. It opened in the latter part of September, 1863.',image:'https://www.us-coin-values-advisor.com/images/xDenver-Mint-1st.jpg.pagespeed.ic.QjZpEaqyLc.jpg'}
            // https://www.us-coin-values-advisor.com/us-denver-mint.html
    ];

    function onClick(event) {
        var pctX = event.pageX / event.target.width,
            pctY = event.pageY / event.target.height;
        console.log(pctX,pctY);
        features.forEach(function(feature){
            var deltaX = feature.pctX-pctX,
                deltaY = feature.pctY-pctY,
                distance = Math.sqrt(deltaX**2 + deltaY**2);
            if (distance < 0.02) {
                console.log(feature.name);
                document.getElementById('name').textContent = feature.name;
                document.getElementById('description').textContent = feature.description;
                document.getElementById('image').setAttribute('src',feature.image);
                moveTo(feature.latitude,feature.longitude);
            }
        });
    }

    var osm = L.tileLayer('https://mapwarper.net/maps/tile/61381/{z}/{x}/{y}.png', {attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors', minZoom: 10, maxZoom: 18});
    var map = L.map('map', {
        center: [39.749771275005315, -104.99320908930397],
        zoom: 13,
        minZoom: 5,
        maxZoom: 18,
        layers: [osm]
    });

    function moveTo (latitude,longitude) {
        event.preventDefault();
        map.setView([latitude,longitude],17);
        document.getElementById("map").scrollIntoView();
    }
</script>
</html>